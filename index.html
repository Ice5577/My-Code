<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cozy Forest Run - Forest Expedition</title>
    <!-- ‡πÇ‡∏´‡∏•‡∏î Three.js ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Å‡∏£‡∏≤‡∏ü‡∏¥‡∏Å 3D -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- ‡πÇ‡∏´‡∏•‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡∏Ç‡∏≠‡∏á UI -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #558b2f;      /* ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏õ‡πà‡∏≤ */
            --primary-light: #8bc34a;
            --accent: #ff8f00;       /* ‡∏™‡∏µ‡∏™‡πâ‡∏°‡∏•‡∏π‡∏Å‡∏ô‡∏±‡∏ó */
            --cream: #fff9e6;        /* ‡∏™‡∏µ‡∏Ñ‡∏£‡∏µ‡∏°‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© */
            --wood: #5d4037;         /* ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÑ‡∏°‡πâ */
            --shadow: rgba(93, 64, 55, 0.2);
        }

        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Quicksand', sans-serif;
            background-color: #e8f5e9;
            user-select: none;
        }

        /* --- ‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö UI (User Interface) --- */
        #ui-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 100;
            pointer-events: none;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .screen {
            position: absolute;
            width: 100%; height: 100%;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(46, 64, 46, 0.1);
            backdrop-filter: blur(10px);
            pointer-events: auto;
            transition: opacity 0.4s ease;
        }

        .active { display: flex; opacity: 1; }

        .menu-card {
            background: var(--cream);
            padding: 3rem;
            border-radius: 50px 80px 40px 90px;
            text-align: center;
            box-shadow: 0 20px 0 var(--shadow);
            border: 5px solid var(--wood);
            max-width: 480px;
            width: 85%;
            transform: rotate(-0.5deg);
        }

        h1 { 
            font-family: 'Fredoka One', cursive;
            color: var(--wood);
            font-size: 3.5rem;
            margin: 0;
            line-height: 1;
            text-shadow: 3px 3px 0 #fff;
        }

        h2 { 
            color: var(--primary);
            font-size: 1.1rem;
            margin-bottom: 2rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 700;
        }

        .btn-group { display: flex; flex-direction: column; gap: 15px; width: 100%; }
        
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 1.1rem;
            font-size: 1.4rem;
            font-family: 'Fredoka One', cursive;
            border-radius: 20px 40px 25px 35px;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 8px 0 var(--wood);
        }

        .btn:hover { transform: scale(1.03) rotate(1deg); background: var(--primary-light); }
        .btn:active { transform: translateY(4px); box-shadow: 0 4px 0 var(--wood); }
        .btn-shop { background: var(--accent); box-shadow: 0 8px 0 #bf360c; }
        .btn-secondary { background: #b0bec5; box-shadow: 0 8px 0 #546e7a; }

        /* HUD - ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏ì‡∏∞‡πÄ‡∏•‡πà‡∏ô */
        #hud {
            position: absolute;
            top: 25px; left: 25px;
            display: none;
            flex-direction: column;
            gap: 12px;
            pointer-events: none;
        }

        .hud-item {
            background: var(--cream);
            padding: 10px 20px;
            border-radius: 15px 25px 12px 20px;
            font-weight: 700;
            color: var(--wood);
            border: 3px solid var(--wood);
            box-shadow: 4px 4px 0 var(--shadow);
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .shop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0; }
        .shop-item {
            background: white;
            padding: 15px;
            border-radius: 20px;
            border: 3px solid #eee;
            cursor: pointer;
            transition: all 0.2s;
        }
        .shop-item.selected { border-color: var(--primary); background: #f1f8e9; transform: scale(1.05); }
        .shop-item.locked { opacity: 0.5; filter: grayscale(1); }
        .skin-circle { width: 40px; height: 40px; border-radius: 50%; margin: 0 auto 10px; border: 2px solid rgba(0,0,0,0.1); }

        canvas { display: block; }
    </style>
</head>
<body>

    <!-- ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡πÄ‡∏Å‡∏° (HUD) -->
    <div id="hud">
        <div class="hud-item" style="transform: rotate(-1deg);">üå∞ <span id="score-val">0</span></div>
        <div class="hud-item" style="transform: rotate(1deg);">üìç <span id="dist-val">0</span> ‡∏°.</div>
    </div>

    <div id="ui-overlay">
        <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å (Main Menu) -->
        <div id="main-menu" class="screen active">
            <div class="menu-card">
                <h1>Cozy Run</h1>
                <h2>Forest Expedition</h2>
                <div class="hud-item" style="margin: 0 auto 25px; justify-content: center;">
                    ‡πÄ‡∏°‡∏•‡πá‡∏î‡∏ô‡∏±‡∏ó‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="total-acorns" style="margin-left: 10px;">0</span>
                </div>
                <div class="btn-group">
                    <button class="btn" onclick="startGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏•‡∏¢!</button>
                    <button class="btn btn-shop" onclick="showScreen('shop-menu')">‡∏ï‡∏π‡πâ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡∏à‡∏¥‡πâ‡∏á‡∏à‡∏≠‡∏Å</button>
                </div>
            </div>
        </div>

        <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤ (Shop/Wardrobe) -->
        <div id="shop-menu" class="screen">
            <div class="menu-card">
                <h1>Wardrobe</h1>
                <div class="hud-item" style="margin: 10px auto 20px; justify-content: center;">‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: <span id="shop-acorns" style="margin-left: 10px;">0</span> üå∞</div>
                <div class="shop-grid">
                    <div class="shop-item selected" onclick="buySkin(0, 0)">
                        <div class="skin-circle" style="background: #e67e22;"></div>
                        <div style="font-weight:700">Classic</div>
                        <div style="font-size:0.8rem">‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß</div>
                    </div>
                    <div id="skin-1" class="shop-item locked" onclick="buySkin(1, 50)">
                        <div class="skin-circle" style="background: #eceff1;"></div>
                        <div style="font-weight:700">Arctic</div>
                        <div style="font-size:0.8rem">50 üå∞</div>
                    </div>
                    <div id="skin-2" class="shop-item locked" onclick="buySkin(2, 150)">
                        <div class="skin-circle" style="background: #37474f;"></div>
                        <div style="font-weight:700">Shadow</div>
                        <div style="font-size:0.8rem">150 üå∞</div>
                    </div>
                    <div id="skin-3" class="shop-item locked" onclick="buySkin(3, 300)">
                        <div class="skin-circle" style="background: #f06292;"></div>
                        <div style="font-weight:700">Sakura</div>
                        <div style="font-size:0.8rem">300 üå∞</div>
                    </div>
                </div>
                <button class="btn btn-secondary" style="width:100%" onclick="showScreen('main-menu')">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏°‡∏ô‡∏π</button>
            </div>
        </div>

        <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏à‡∏ö‡πÄ‡∏Å‡∏° (Game Over) -->
        <div id="game-over" class="screen">
            <div class="menu-card" style="border-color: var(--accent);">
                <h1 style="color: var(--accent);">Oh No!</h1>
                <p style="font-weight:700; color: var(--wood); margin: 20px 0;">‡∏Ñ‡∏∏‡∏ì‡∏ß‡∏¥‡πà‡∏á‡∏ä‡∏ô‡∏≠‡∏∏‡∏õ‡∏™‡∏£‡∏£‡∏Ñ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß!</p>
                <div style="margin: 20px 0;">
                    <div class="hud-item" style="justify-content: center; margin: 10px auto;">‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á: <span id="final-dist">0</span>‡∏°.</div>
                    <div class="hud-item" style="justify-content: center; margin: 10px auto;">‡πÄ‡∏Å‡πá‡∏ö‡∏ô‡∏±‡∏ó‡πÑ‡∏î‡πâ: <span id="final-score">0</span></div>
                </div>
                <div class="btn-group">
                    <button class="btn" onclick="startGame()">‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
                    <button class="btn btn-secondary" onclick="backToMenu()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        /* --- ‡∏£‡∏∞‡∏ö‡∏ö Game Engine (Three.js) --- */
        let scene, camera, renderer, player;
        let score = 0, totalAcorns = 0, distanceRun = 0, speed = 0.35;
        let gameActive = false;
        let laneWidth = 3, currentLane = 0, targetLaneX = 0;
        let trees = [], coins = [], obstacles = [];
        let distanceTravelled = 0, lastSpawnDist = 0;

        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏Å‡∏¥‡∏ô‡∏à‡∏¥‡πâ‡∏á‡∏à‡∏≠‡∏Å
        let ownedSkins = [0], currentSkinIndex = 0;
        const skinColors = [0xe67e22, 0xeceff1, 0x37474f, 0xf06292];

        function init() {
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏â‡∏≤‡∏Å‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xdcedc8);
            scene.fog = new THREE.Fog(0xdcedc8, 20, 80);

            camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 1000);
            camera.position.set(0, 6, 12);
            camera.lookAt(0, 1, -2);

            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            document.body.appendChild(renderer.domElement);

            // ‡πÅ‡∏™‡∏á‡∏™‡∏ß‡πà‡∏≤‡∏á
            scene.add(new THREE.AmbientLight(0xffffff, 0.8));
            const sun = new THREE.DirectionalLight(0xffffff, 1.2);
            sun.position.set(20, 40, 10);
            sun.castShadow = true;
            scene.add(sun);

            // ‡∏û‡∏∑‡πâ‡∏ô‡∏î‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏ñ‡∏ô‡∏ô
            const ground = new THREE.Mesh(new THREE.PlaneGeometry(100, 2000), new THREE.MeshStandardMaterial({color: 0x9ccc65}));
            ground.rotation.x = -Math.PI/2; ground.receiveShadow = true; scene.add(ground);

            const road = new THREE.Mesh(new THREE.PlaneGeometry(laneWidth * 4, 2000), new THREE.MeshStandardMaterial({color: 0xc5e1a5}));
            road.rotation.x = -Math.PI/2; road.position.y = 0.05; road.receiveShadow = true; scene.add(road);

            player = createCozyFox(); // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î
            scene.add(player);

            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth/window.innerHeight; camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });

            // ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏µ‡∏¢‡πå‡∏ö‡∏≠‡∏£‡πå‡∏î
            window.addEventListener('keydown', e => {
                if(e.key === "ArrowLeft" || e.key === "a") moveLane(-1);
                if(e.key === "ArrowRight" || e.key === "d") moveLane(1);
            });

            animate();
        }

        /* --- ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£ (Procedural Assets) --- */
        function createCozyFox() {
            const group = new THREE.Group();
            const color = skinColors[currentSkinIndex];
            const mat = new THREE.MeshStandardMaterial({color: color, roughness: 0.7});
            const whiteMat = new THREE.MeshStandardMaterial({color: 0xffffff, roughness: 0.7});
            const blackMat = new THREE.MeshStandardMaterial({color: 0x212121});

            // ‡∏ï‡∏±‡∏ß (Body)
            const body = new THREE.Mesh(new THREE.BoxGeometry(0.8, 0.7, 1.4), mat);
            body.position.y = 0.6; group.add(body);

            // ‡∏´‡∏±‡∏ß (Head)
            const headGroup = new THREE.Group();
            const head = new THREE.Mesh(new THREE.BoxGeometry(0.7, 0.6, 0.7), mat);
            headGroup.add(head);
            
            const snout = new THREE.Mesh(new THREE.BoxGeometry(0.4, 0.3, 0.4), whiteMat);
            snout.position.set(0, -0.1, -0.4); headGroup.add(snout);

            const nose = new THREE.Mesh(new THREE.BoxGeometry(0.1, 0.1, 0.1), blackMat);
            nose.position.set(0, -0.05, -0.6); headGroup.add(nose);

            // ‡∏´‡∏π (Ears)
            const earGeo = new THREE.ConeGeometry(0.18, 0.4, 4);
            const lEar = new THREE.Mesh(earGeo, mat); lEar.position.set(0.25, 0.4, -0.1); headGroup.add(lEar);
            const rEar = lEar.clone(); rEar.position.x = -0.25; headGroup.add(rEar);

            headGroup.position.set(0, 1.1, -0.6); group.add(headGroup);

            // ‡∏ú‡πâ‡∏≤‡∏û‡∏±‡∏ô‡∏Ñ‡∏≠ (Scarf)
            const scarf = new THREE.Mesh(new THREE.TorusGeometry(0.4, 0.12, 8, 16), new THREE.MeshStandardMaterial({color: 0xd32f2f}));
            scarf.rotation.x = Math.PI/2; scarf.position.set(0, 0.85, -0.4); group.add(scarf);

            // ‡∏´‡∏≤‡∏á (Tail)
            const tail = new THREE.Group();
            const tailPart = new THREE.Mesh(new THREE.BoxGeometry(0.4, 0.4, 0.8), mat);
            tailPart.rotation.x = -0.4; tail.add(tailPart);
            const tailTip = new THREE.Mesh(new THREE.BoxGeometry(0.42, 0.42, 0.3), whiteMat);
            tailTip.position.set(0, 0.2, 0.5); tail.add(tailTip);
            tail.position.set(0, 0.6, 0.8); group.add(tail);

            group.traverse(c => { if(c.isMesh) { c.castShadow = true; c.receiveShadow = true; }});
            return group;
        }

        /* --- ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏£‡∏Å‡∏∞‡πÄ‡∏Å‡∏° --- */
        function moveLane(d) {
            if(!gameActive) return;
            currentLane = Math.max(-1, Math.min(1, currentLane + d));
            targetLaneX = currentLane * laneWidth;
        }

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            if(id !== 'none') document.getElementById(id).classList.add('active');
            
            if(id === 'main-menu' || id === 'shop-menu') updateUI();
            document.getElementById('hud').style.display = (id === 'none') ? 'flex' : 'none';
        }

        function updateUI() {
            document.getElementById('total-acorns').innerText = totalAcorns;
            document.getElementById('shop-acorns').innerText = totalAcorns;
            
            ownedSkins.forEach(idx => {
                const el = document.getElementById(`skin-${idx}`);
                if(el) {
                    el.classList.remove('locked');
                    el.querySelector('div:last-child').innerText = (currentSkinIndex === idx) ? "‡∏™‡∏ß‡∏°‡πÉ‡∏™‡πà‡πÅ‡∏•‡πâ‡∏ß" : "‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß";
                }
            });
            document.querySelectorAll('.shop-item').forEach((it, i) => it.classList.toggle('selected', i === currentSkinIndex));
        }

        function buySkin(idx, price) {
            if(ownedSkins.includes(idx)) {
                currentSkinIndex = idx;
                scene.remove(player); player = createCozyFox(); scene.add(player);
                updateUI(); return;
            }
            if(totalAcorns >= price) {
                totalAcorns -= price; ownedSkins.push(idx); currentSkinIndex = idx;
                scene.remove(player); player = createCozyFox(); scene.add(player);
                updateUI();
            }
        }

        function startGame() {
            score = 0; distanceRun = 0; speed = 0.35; currentLane = 0; targetLaneX = 0;
            [...trees, ...coins, ...obstacles].forEach(o => scene.remove(o));
            trees = []; coins = []; obstacles = [];
            gameActive = true;
            showScreen('none');
        }

        function backToMenu() { gameActive = false; showScreen('main-menu'); }

        function animate() {
            requestAnimationFrame(animate);
            if(gameActive) {
                speed += 0.00005;
                distanceTravelled += speed;
                distanceRun += speed * 2;
                document.getElementById('dist-val').innerText = Math.floor(distanceRun);
                document.getElementById('score-val').innerText = score;

                // ‡∏Å‡∏≤‡∏£‡∏Ç‡∏¢‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
                player.position.x = THREE.MathUtils.lerp(player.position.x, targetLaneX, 0.15);
                player.rotation.y = (player.position.x - targetLaneX) * 0.2;
                player.position.y = Math.abs(Math.sin(Date.now() * 0.01)) * 0.15; // ‡∏ß‡∏¥‡πà‡∏á‡πÅ‡∏ö‡∏ö‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î‡πÜ

                // ‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏Å‡∏¥‡∏î‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏
                if(distanceTravelled - lastSpawnDist > 15) {
                    spawnStuff();
                    lastSpawnDist = distanceTravelled;
                }

                // ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤
                [...obstacles].forEach(o => {
                    o.position.z += speed;
                    if(o.position.z > 5) { scene.remove(o); obstacles.splice(obstacles.indexOf(o), 1); }
                    if(o.position.z > -1 && o.position.z < 1 && Math.abs(o.position.x - player.position.x) < 1.2) {
                        gameActive = false; totalAcorns += score;
                        document.getElementById('final-dist').innerText = Math.floor(distanceRun);
                        document.getElementById('final-score').innerText = score;
                        showScreen('game-over');
                    }
                });

                [...coins].forEach(o => {
                    o.position.z += speed; o.rotation.y += 0.1;
                    if(o.position.z > 5) { scene.remove(o); coins.splice(coins.indexOf(o), 1); }
                    if(o.position.z > -1 && o.position.z < 1 && Math.abs(o.position.x - player.position.x) < 1) {
                        score++; scene.remove(o); coins.splice(coins.indexOf(o), 1);
                    }
                });

                [...trees].forEach(o => { o.position.z += speed; if(o.position.z > 15) { scene.remove(o); trees.splice(trees.indexOf(o), 1); }});
            }
            renderer.render(scene, camera);
        }

        function spawnStuff() {
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏ó‡∏≤‡∏á‡πÄ‡∏î‡∏¥‡∏ô
            for(let i=0; i<2; i++) {
                const side = i === 0 ? 1 : -1;
                const tree = new THREE.Group();
                const trunk = new THREE.Mesh(new THREE.CylinderGeometry(0.3, 0.4, 2), new THREE.MeshStandardMaterial({color: 0x5d4037}));
                const leaf = new THREE.Mesh(new THREE.SphereGeometry(1.5, 8, 8), new THREE.MeshStandardMaterial({color: 0x388e3c}));
                leaf.position.y = 2; tree.add(trunk, leaf);
                tree.position.set(side * (laneWidth * 2.5 + Math.random()*2), 1, -100);
                scene.add(tree); trees.push(tree);
            }

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏≠‡πÄ‡∏ó‡∏°‡πÄ‡∏Å‡πá‡∏ö (‡∏ô‡∏±‡∏ó) ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏¥‡πà‡∏á‡∏Å‡∏µ‡∏î‡∏Ç‡∏ß‡∏≤‡∏á (‡∏´‡∏¥‡∏ô)
            const lane = Math.floor(Math.random()*3)-1;
            if(Math.random() > 0.4) {
                const nut = new THREE.Group();
                const b = new THREE.Mesh(new THREE.SphereGeometry(0.4, 8, 8), new THREE.MeshStandardMaterial({color: 0x8d6e63}));
                b.scale.y = 1.3; 
                const c = new THREE.Mesh(new THREE.SphereGeometry(0.42, 8, 8, 0, Math.PI*2, 0, Math.PI/2), new THREE.MeshStandardMaterial({color: 0x5d4037}));
                c.position.y = 0.2; nut.add(b, c);
                nut.position.set(lane * laneWidth, 0.8, -100); scene.add(nut); coins.push(nut);
            } else {
                const rock = new THREE.Mesh(new THREE.DodecahedronGeometry(0.8), new THREE.MeshStandardMaterial({color: 0x9e9e9e}));
                rock.position.set(lane * laneWidth, 0.6, -100); scene.add(rock); obstacles.push(rock);
            }
        }

        window.onload = init;
    </script>
</body>
</html>